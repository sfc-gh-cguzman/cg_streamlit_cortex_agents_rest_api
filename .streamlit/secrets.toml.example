# =============================================================================
# STREAMLIT SECRETS CONFIGURATION EXAMPLE
# =============================================================================
# Copy this file to 'secrets.toml' and update with your actual credentials
# WARNING: Never commit secrets.toml to version control!

# =============================================================================
# SNOWFLAKE AUTHENTICATION - STREAMLIT CONNECTIONS FORMAT
# =============================================================================
# Using Streamlit's preferred [connections.snowflake] format for authentication
# This format is automatically detected and has highest priority in our app

[connections.snowflake]
# Snowflake account identifier
# IMPORTANT: If your account identifier contains underscores, replace them with hyphens
# Example: myorg-my_account → myorg-my-account
account = "YOUR-ACCOUNT-IDENTIFIER"

# Username for authentication
user = "YOUR_USERNAME"

# Personal Access Token (PAT) - stored in password field
# NOTE: This looks like a JWT token and will be auto-detected as PAT
password = "eyJraWQiOiJZT1VSX1BBVCIsImFsZyI6IkVTMjU2In0.YOUR_PERSONAL_ACCESS_TOKEN_HERE"

# Snowflake warehouse for compute
warehouse = "YOUR_WAREHOUSE"

# Role with access to agents
role = "YOUR_ROLE"

# Database containing Cortex Agents
database = "SNOWFLAKE_INTELLIGENCE"

# Schema containing agent definitions
schema = "AGENTS"

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================
# Optional settings to customize application behavior

[app]
# Enable debug mode for development (shows additional logging and debug UI)
debug_mode = false

# Maximum rows to display in data tables (prevents UI slowdowns)
max_dataframe_rows = 1000

# File and citation settings
enable_file_preview = true      # Show file content previews
enable_citations = true         # Display citation references
enable_suggestions = true       # Show sample questions
max_pdf_pages = 2              # Limit PDF preview pages

# API timeout in milliseconds (50 seconds for complex queries)
api_timeout = 50000

# =============================================================================
# ALTERNATIVE AUTHENTICATION METHODS (for reference)
# =============================================================================
# These are commented out but show other ways to authenticate
# Uncomment and modify if you need different authentication methods

# For RSA Private Key Authentication:
# [connections.snowflake]
# account = "myorgname-myaccountname"  # Remember: underscores → hyphens
# user = "your_username"
# private_key_path = "/path/to/rsa_key.p8"
# warehouse = "your_warehouse"
# role = "your_role"
# database = "SNOWFLAKE_INTELLIGENCE"
# schema = "AGENTS"

# For Username/Password Authentication:
# [connections.snowflake]
# account = "myorgname-myaccountname"  # Remember: underscores → hyphens
# user = "your_username" 
# password = "your_actual_password"
# warehouse = "your_warehouse"
# role = "your_role"
# database = "SNOWFLAKE_INTELLIGENCE"
# schema = "AGENTS"

# =============================================================================
# SECURITY NOTES
# =============================================================================
# - This file contains sensitive credentials - never commit to git
# - PAT tokens are secure and recommended for development
# - RSA keys are recommended for production deployments
# - Ensure proper file permissions: chmod 600 .streamlit/secrets.toml
# - Consider using environment variables in production

# =============================================================================
# SETUP INSTRUCTIONS
# =============================================================================

# Step 1: Copy this example file
# ------------------------------
# cp .streamlit/secrets.toml.example .streamlit/secrets.toml

# Step 2: Update your credentials
# ------------------------------
# Replace all placeholder values with your actual Snowflake credentials:
# - YOUR-ACCOUNT-IDENTIFIER: Your Snowflake account (remember: underscores → hyphens)
# - YOUR_USERNAME: Your Snowflake username
# - eyJraWQi...: Your actual Personal Access Token
# - YOUR_WAREHOUSE: Your Snowflake warehouse name
# - YOUR_ROLE: Your Snowflake role (e.g., ACCOUNTADMIN, ANALYST)

# Step 3: Set secure file permissions
# -----------------------------------
# chmod 600 .streamlit/secrets.toml

# Step 4: Test the connection
# --------------------------
# Run: ./run_external_app.sh

# =============================================================================
# TROUBLESHOOTING
# =============================================================================

# Authentication Errors:
# - Verify account identifier format (underscores → hyphens)
# - Ensure user has access to Cortex Agents feature
# - Check warehouse is active and accessible
# - Verify role has necessary permissions

# SSL Certificate Errors:
# - Double-check account identifier format
# - Ensure no underscores in account name
# - Verify account URL matches certificate

# Permission Errors:
# - Ensure role has access to SNOWFLAKE_INTELLIGENCE database
# - Check USAGE privileges on warehouse
# - Verify CORTEX privileges for AI functions